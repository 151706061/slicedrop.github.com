<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="./css/styles.css" />

    <title>Slice:Drop - 3D Scientific Visualization</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap"
      rel="stylesheet"
    />
    <script src="https://mrdoob.github.io/stats.js/build/stats.min.js"></script>
    <script type="module">
      import { Pane } from "https://cdn.jsdelivr.net/npm/tweakpane@4.0.3/dist/tweakpane.min.js";
      window.Pane = Pane;
    </script>
    <script type="module" src="./js/index.js"></script>

    <link rel="icon" href="./images/SliceDropReloaded.svg" />
  </head>
  <body>
    <!-- Landing page container -->
    <div id="landingContainer" class="landing-container">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <img
            src="./images/SliceDropReloaded.svg"
            alt="Slice:Drop Logo"
            class="logo"
          />
          <div class="header-text">
            <h1>Slice:Drop</h1>
            <p>Instantly view scientific and medical imaging data in 3D</p>
          </div>
        </div>

        <div class="examples-container">
          <h2>Try the examples...</h2>

          <!-- Row of example images -->
          <div class="examples-grid">
            <div
              class="example-card"
              data-example="1"
              data-caption="A 14-year-old healthy male brain. The patient was scanned using a structural MRI and a diffusion MRI to highlight connecting brain fibers. Loading time: +++"
            >
              <img src="./images/14yrold.png" alt="Brain MRI Example" />
            </div>

            <div
              class="example-card"
              data-caption="A contrast-enhanced 3D MR image showing an arteriovenous fistula, a bypass created by joining an artery and a vein, located in an arm. Loading time: +"
              data-example="2"
            >
              <img src="./images/avf_small.png" alt="Arteriovenous Fistula" />
            </div>

            <div
              class="example-card"
              data-caption="The surface of the left hemisphere of a 2-year-old healthy brain. The scalar overlay shows the bending energy based on Curvedness. Loading time: ++"
              data-example="3"
            >
              <img src="./images/2yrold_small.png" alt="Brain Surface" />
            </div>

            <div
              class="example-card"
              data-caption="A region of the brainstem of a human adult including an automatically generated segmentation as a label map colorized using an anatomical color table. Loading time: +"
              data-example="4"
            >
              <img src="./images/brainstem_small.png" alt="Brainstem" />
            </div>
          </div>

          <!-- Caption container -->
          <div class="caption-container">
            <p id="dynamic-caption">
              A 14-year-old healthy male brain. The patient was scanned using a
              structural MRI and a diffusion MRI to highlight connecting brain
              fibers. Loading time: +++
            </p>
          </div>
        </div>
      </header>

      <div class="main-content">
        <!-- Drag & Drop Zone -->
        <section class="dropzone-section">
          <div id="dropZone" class="drop-zone">
            <div class="drop-zone__content">
              <div id="dropText" class="drop-zone__text">
                Drag & drop your files here
              </div>
              <div class="drop-zone__separator">or</div>
              <label class="drop-zone__button">
                Choose File
                <input type="file" id="fileInput" class="hidden" multiple />
              </label>
            </div>
          </div>
        </section>

        <!-- Format Info Section -->
        <section class="format-info">
          <div class="format-card">
            <img src="./images/fibers.png" alt="Fibers Format" />
            <h3>Fibers</h3>
            <p>(.trk / .tko)</p>
          </div>
          <div class="format-card">
            <img src="./images/dicom.png" alt="Volumes Format" />
            <h3>Volumes</h3>
            <p>(.nii / .nii.gz / DICOM)</p>
          </div>
          <div class="format-card">
            <img src="./images/surface.png" alt="Models Format" />
            <h3>Models</h3>
            <p>(.obj / .vtk / .stl / FreeSurfer)</p>
          </div>
        </section>
      </div>

      <!-- Footer -->
      <footer class="footer">
        <div class="footer-links">
          <a
            href="https://github.com/slicedrop/slicedrop.github.com"
            target="_blank"
            >Source Code</a
          >
          <span class="separator">|</span>
          <a href="https://mpsych.org/" target="_blank">Machine Psychology</a>
          <span class="separator">|</span>
          <a href="mailto:team@mpsych.org">Send Feedback</a>
        </div>
      </footer>
    </div>

    <div id="viewerContainer" class="viewer-container hidden">
      <header class="viewer-header">
        <img 
          src="./images/SliceDropReloaded.svg" 
          alt="Slice:Drop Logo" 
          class="viewer-logo"
          onclick="location.reload()"
        />
      </header>
      
      <div class="drawer-container">
        <div class="drawer">
          <div class="drawer-header">
            <span class="drawer-tab-text">Volume</span>
            <i class="fa-solid fa-thumbtack pin-icon"></i>
          </div>
          <div class="drawer-content"></div>
        </div>

        <div class="drawer">
          <div class="drawer-header">
            <i class="fa-solid fa-thumbtack pin-icon"></i>
            <span class="drawer-tab-text">Mesh</span>
          </div>

          <div class="drawer-content"></div>
        </div>

        <div class="drawer">
          <div class="drawer-header">
            <i class="fa-solid fa-thumbtack pin-icon"></i>
            <span class="drawer-tab-text">Fibers</span>
          </div>

          <div class="drawer-content"></div>
        </div>
      </div>
      <canvas id="gl1"></canvas>
      <input
        type="range"
        id="axSlider"
        min="0"
        max="100"
        data-axcorsag="0"
        style="position: absolute; visibility: hidden"
      />
      <input
        type="range"
        id="corSlider"
        min="0"
        max="100"
        data-axcorsag="1"
        style="position: absolute; visibility: hidden"
      />
      <input
        type="range"
        id="sagSlider"
        min="0"
        max="100"
        data-axcorsag="2"
        style="position: absolute; visibility: hidden"
      />

      <div id="shortcut-tooltip">
        <strong>Hotkeys:</strong>
        <ul>
          <li>Key "u": Utility pane</li>
          <li>Ctrl + Alt + a: Advanced pane modes</li>
        </ul>
      </div>
    </div>
    
    
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const cards = document.querySelectorAll(".example-card");
        const captionEl = document.getElementById("dynamic-caption");

        // Set first card as active by default
        cards[0].classList.add("active");
        captionEl.innerText = cards[0].getAttribute("data-caption");

        // Update active state and caption on hover
        cards.forEach((card) => {
          card.addEventListener("mouseenter", (event) => {
            // Remove active class from all cards
            cards.forEach((c) => c.classList.remove("active"));

            // Add active class to hovered card
            card.classList.add("active");

            // Update caption
            captionEl.innerText = card.getAttribute("data-caption");
          });
        });
      });
    </script>
  </body>
</html>
